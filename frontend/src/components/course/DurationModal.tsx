import React, { useEffect } from 'react';
import {
  Dialog,
  DialogTitle,
  DialogContent,
  DialogActions,
  Button,
  IconButton,
  Box,
  Typography,
  Fade,
  Backdrop,
} from '@mui/material';
import CloseIcon from '@mui/icons-material/Close';
import ReactMarkdown from 'react-markdown';
import remarkGfm from 'remark-gfm';

/**
 * –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ–ø—Å–æ–≤ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ DurationModal
 */
export interface DurationModalProps {
  /** –§–ª–∞–≥ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
  open: boolean;
  /** –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */
  onClose: () => void;
}

/**
 * –ö–æ–Ω—Ç–µ–Ω—Ç –æ–ø–∏—Å–∞–Ω–∏—è –¥—é—Ä–∞—Ü–∏–∏ –æ–±–ª–∏–≥–∞—Ü–∏–π
 */
const DURATION_CONTENT = `üï∞Ô∏è **–ß—Ç–æ —Ç–∞–∫–æ–µ –î—é—Ä–∞—Ü–∏—è –æ–±–ª–∏–≥–∞—Ü–∏–π?**

–î—é—Ä–∞—Ü–∏—è ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ –ø–æ–Ω—è—Ç–∏–µ –Ω–∞ —Ä—ã–Ω–∫–µ –æ–±–ª–∏–≥–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–≥–∞–µ—Ç –∏–Ω–≤–µ—Å—Ç–æ—Ä—É –æ—Ü–µ–Ω–∏—Ç—å –¥–≤–∞ –≤–∞–∂–Ω–µ–π—à–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –±—É–º–∞–≥–∏: —Å—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ –∏ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π —Ä–∏—Å–∫.

–í —Å–∞–º–æ–π –ø—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–µ, –¥—é—Ä–∞—Ü–∏—è (–∏–∑–º–µ—Ä—è–µ–º–∞—è –≤ –≥–æ–¥–∞—Ö) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä –≤–µ—Ä–Ω–µ—Ç –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ–±—Ä–∞—Ç–Ω–æ, —É—á–∏—Ç—ã–≤–∞—è –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ –Ω–æ–º–∏–Ω–∞–ª–∞, –Ω–æ –∏ –≤—Å–µ –∫—É–ø–æ–Ω–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –ø–æ –ø—É—Ç–∏. –ß–µ–º –±—ã—Å—Ç—Ä–µ–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç –∫—É–ø–æ–Ω—ã, —Ç–µ–º –º–µ–Ω—å—à–µ —É –æ–±–ª–∏–≥–∞—Ü–∏–∏ –¥—é—Ä–∞—Ü–∏—è. –ü–æ–Ω–∏–º–∞–Ω–∏–µ –¥—é—Ä–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∞ –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑—ã–≤–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –±–∞–Ω–∫–∞ –ø–æ –∫–ª—é—á–µ–≤–æ–π —Å—Ç–∞–≤–∫–µ —Å —Ü–µ–Ω–æ–π –≤–∞—à–µ–π –æ–±–ª–∏–≥–∞—Ü–∏–∏: —á–µ–º –¥–ª–∏–Ω–Ω–µ–µ –¥—é—Ä–∞—Ü–∏—è, —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ —Å–∫–∞—á–æ–∫ —Ü–µ–Ω—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞–≤–∫–∏.

## 1. –î—é—Ä–∞—Ü–∏—è –ú–∞–∫–æ–ª–µ—è (Macaulay Duration)
–î—é—Ä–∞—Ü–∏—è –ú–∞–∫–æ–ª–µ—è ‚Äî —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–º –∏ –Ω–∞–∏–±–æ–ª–µ–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º –≤–∏–¥–æ–º –¥—é—Ä–∞—Ü–∏–∏.

**–ß—Ç–æ —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:** –≠—Ç–æ —Å—Ä–µ–¥–Ω–µ–≤–∑–≤–µ—à–µ–Ω–Ω—ã–π —Å—Ä–æ–∫ –æ–∫—É–ø–∞–µ–º–æ—Å—Ç–∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π. –û–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ —Å—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫, –∑–∞ –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ (–∫—É–ø–æ–Ω—ã –∏ –Ω–æ–º–∏–Ω–∞–ª) –æ–±–ª–∏–≥–∞—Ü–∏–∏, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–µ –∫ —Ç–µ–∫—É—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏, –±—É–¥—É—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã –∏–Ω–≤–µ—Å—Ç–æ—Ä—É. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏, —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–π, —Å—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫, –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–∞—à–∏ –¥–µ–Ω—å–≥–∏ ¬´–∑–∞–º–æ—Ä–æ–∂–µ–Ω—ã¬ª –≤ —ç—Ç–æ–π –±—É–º–∞–≥–µ.

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª:** –ï—Å–ª–∏ –æ–±–ª–∏–≥–∞—Ü–∏—è –∏–º–µ–µ—Ç —Å—Ä–æ–∫ –¥–æ –ø–æ–≥–∞—à–µ–Ω–∏—è 10 –ª–µ—Ç, –Ω–æ –¥—é—Ä–∞—Ü–∏—è –ú–∞–∫–æ–ª–µ—è —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—Å–µ–≥–æ 7 –ª–µ—Ç, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –≤–µ—Ä–Ω–µ—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª (–≤ —Ç–µ–∫—É—â–∏—Ö —Ü–µ–Ω–∞—Ö) –∑–∞ 7 –ª–µ—Ç –±–ª–∞–≥–æ–¥–∞—Ä—è –ø–æ–ª—É—á–µ–Ω–∏—é –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –∫—É–ø–æ–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç. –ß–µ–º –≤—ã—à–µ –∫—É–ø–æ–Ω, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ –≤—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç–µ –¥–µ–Ω—å–≥–∏, –∏ —Ç–µ–º –º–µ–Ω—å—à–µ –±—É–¥–µ—Ç –¥—é—Ä–∞—Ü–∏—è –ú–∞–∫–æ–ª–µ—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å—Ä–æ–∫–æ–º –¥–æ –ø–æ–≥–∞—à–µ–Ω–∏—è.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –≠—Ç–∞ –º–µ—Ç—Ä–∏–∫–∞ —á–∞—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤, –∞ —Ç–∞–∫–∂–µ –¥–ª—è —Ü–µ–ª–µ–π –∏–º–º—É–Ω–∏–∑–∞—Ü–∏–∏ ‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –∫–æ–≥–¥–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–æ–∫–∏ —Å–≤–æ–∏—Ö –∞–∫—Ç–∏–≤–æ–≤ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤.

## 2. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –î—é—Ä–∞—Ü–∏—è (Modified Duration)
–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥—é—Ä–∞—Ü–∏—è ‚Äî —ç—Ç–æ —Å–∞–º–∞—è –≤–∞–∂–Ω–∞—è –∏ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º–µ—Ç—Ä–∏–∫–∞, –∫–æ–≥–¥–∞ —Ä–µ—á—å –∏–¥–µ—Ç –æ —Ä—ã–Ω–æ—á–Ω—ã—Ö —Ä–∏—Å–∫–∞—Ö. –û–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä—è–º—ã–º –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–º –æ—Ç –¥—é—Ä–∞—Ü–∏–∏ –ú–∞–∫–æ–ª–µ—è.

**–ß—Ç–æ —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:** –≠—Ç–æ –º–µ—Ç—Ä–∏–∫–∞ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ü–µ–Ω—ã –æ–±–ª–∏–≥–∞—Ü–∏–∏ –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫ (–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏). –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –Ω–∞ —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Ä—ã–Ω–æ—á–Ω–∞—è —Ü–µ–Ω–∞ –æ–±–ª–∏–≥–∞—Ü–∏–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫ –ø–æ–≥–∞—à–µ–Ω–∏—é –Ω–∞ 1 –ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π –ø—É–Ω–∫—Ç (–ø.–ø.).

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª:** –≠—Ç–æ –≤–∞—à –≥–ª–∞–≤–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–≥–æ —Ä–∏—Å–∫–∞. –ï—Å–ª–∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥—é—Ä–∞—Ü–∏—è –æ–±–ª–∏–≥–∞—Ü–∏–∏ —Ä–∞–≤–Ω–∞ 5 –≥–æ–¥–∞–º, –∏ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –±–∞–Ω–∫ –≤–Ω–µ–∑–∞–ø–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç –∫–ª—é—á–µ–≤—É—é —Å—Ç–∞–≤–∫—É –Ω–∞ 1 –ø.–ø., —Ü–µ–Ω–∞ —ç—Ç–æ–π –æ–±–ª–∏–≥–∞—Ü–∏–∏, –≤–µ—Ä–æ—è—Ç–Ω–æ, —É–ø–∞–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ –Ω–∞ 5%. –ò –Ω–∞–æ–±–æ—Ä–æ—Ç, –µ—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ —É–ø–∞–¥–µ—Ç, —Ü–µ–Ω–∞ –≤—ã—Ä–∞—Å—Ç–µ—Ç –Ω–∞ 5%. –ü–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ —Ä–æ—Å—Ç–∞ —Å—Ç–∞–≤–æ–∫ (—É–∂–µ—Å—Ç–æ—á–µ–Ω–∏–µ –î–ö–ü), –≤—ã –¥–æ–ª–∂–Ω—ã –≤—ã–±–∏—Ä–∞—Ç—å –æ–±–ª–∏–≥–∞—Ü–∏–∏ —Å –Ω–∏–∑–∫–æ–π –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥—é—Ä–∞—Ü–∏–µ–π (–∫–æ—Ä–æ—Ç–∫–∏–µ), —á—Ç–æ–±—ã –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞–¥–µ–Ω–∏–µ —Ü–µ–Ω—ã.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥—é—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º –æ–±–ª–∏–≥–∞—Ü–∏–π, –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É–±—ã—Ç–∫–æ–≤ –∏–ª–∏ –ø—Ä–∏–±—ã–ª–∏ –æ—Ç —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–≤–∏–∂–µ–Ω–∏–π –∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–≥–æ —Ä–∏—Å–∫–∞ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –≤—ã–ø—É—Å–∫–∞–º–∏ –æ–±–ª–∏–≥–∞—Ü–∏–π.

## 3. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –î—é—Ä–∞—Ü–∏—è (Effective Duration)
–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –¥—é—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –±—É–º–∞–≥, —á—å–∏ –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ (–∫—É–ø–æ–Ω—ã –∏–ª–∏ —Å—Ä–æ–∫ –ø–æ–≥–∞—à–µ–Ω–∏—è) –º–æ–≥—É—Ç –º–µ–Ω—è—Ç—å—Å—è –ø–æ–¥ –≤–ª–∏—è–Ω–∏–µ–º –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤.

**–ß—Ç–æ —ç—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:** –≠—Ç–∞ –º–µ—Ç—Ä–∏–∫–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –æ–±–ª–∏–≥–∞—Ü–∏—è–º —Å–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –æ–ø—Ü–∏–æ–Ω–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ –æ–±–ª–∏–≥–∞—Ü–∏—è–º —Å –æ—Ñ–µ—Ä—Ç–æ–π (–ø—Ä–∞–≤–æ–º –¥–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø–æ–≥–∞—à–µ–Ω–∏—è –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é —ç–º–∏—Ç–µ–Ω—Ç–∞) –∏–ª–∏ –∫ –æ–±–ª–∏–≥–∞—Ü–∏—è–º —Å –ø–ª–∞–≤–∞—é—â–∏–º –∫—É–ø–æ–Ω–æ–º (–∫—É–ø–æ–Ω –ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å—Ç–∞–≤–∫–µ –¶–ë –∏–ª–∏ RUONIA). –í —ç—Ç–∏—Ö —Å–ª—É—á–∞—è—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–π —Å—Ç–∞–≤–∫–∏ –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É, –Ω–æ –∏ —Å–ø—Ä–æ–≤–æ—Ü–∏—Ä–æ–≤–∞—Ç—å —ç–º–∏—Ç–µ–Ω—Ç–∞ –∏–ª–∏ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏–æ–Ω, —á—Ç–æ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –º–µ–Ω—è–µ—Ç –±—É–¥—É—â–∏–µ –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏.

**–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª:** –ü–æ—Å–∫–æ–ª—å–∫—É –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥—é—Ä–∞—Ü–∏—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–∞–∫–∏–º–∏ —Å–ª–æ–∂–Ω—ã–º–∏ –±—É–º–∞–≥–∞–º–∏ (–æ–Ω–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–µ –¥–µ–Ω–µ–∂–Ω—ã–µ –ø–æ—Ç–æ–∫–∏), –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –¥—é—Ä–∞—Ü–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—É—Ç—ë–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è: –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Ü–µ–Ω–∞, –µ—Å–ª–∏ —Å—Ç–∞–≤–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—Å—è, –∏ –∫–∞–∫ —ç—Ç–æ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø—Ü–∏–æ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ñ–µ—Ä—Ç—ã).

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–µ–≥–æ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ —ç—Ç–∞ –º–µ—Ç—Ä–∏–∫–∞ —á–∞—Å—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –æ–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –æ–±–ª–∏–≥–∞—Ü–∏—è–º–∏ —Å–æ —Å–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∏–ª–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –∏–ø–æ—Ç–µ—á–Ω—ã–º–∏ —Ü–µ–Ω–Ω—ã–º–∏ –±—É–º–∞–≥–∞–º–∏. –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏—Ö –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –æ–±–ª–∏–≥–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥—é—Ä–∞—Ü–∏—è.`;

/**
 * –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥—é—Ä–∞—Ü–∏–∏ –æ–±–ª–∏–≥–∞—Ü–∏–π
 * 
 * @param props - –ü—Ä–æ–ø—Å—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
 * @returns React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
 */
export const DurationModal: React.FC<DurationModalProps> = ({
  open,
  onClose,
}) => {
  /**
   * –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
   * MUI Dialog —Å–∞–º —É–ø—Ä–∞–≤–ª—è–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —è–≤–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∏–ª–∏
   */
  useEffect(() => {
    if (!open) {
      // –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è
      const timer = setTimeout(() => {
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.width = '';
        document.body.style.overflow = '';
        document.body.style.paddingRight = '';
      }, 100);

      return () => clearTimeout(timer);
    }
  }, [open]);

  /**
   * –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à–∏ Escape –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
   */
  useEffect(() => {
    const handleEscape = (event: KeyboardEvent) => {
      if (event.key === 'Escape' && open) {
        onClose();
      }
    };

    if (open) {
      document.addEventListener('keydown', handleEscape);
      return () => {
        document.removeEventListener('keydown', handleEscape);
      };
    }
  }, [open, onClose]);

  /**
   * –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ backdrop (—Ñ–æ–Ω—É) –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
   */
  const handleBackdropClick = (event: React.MouseEvent<HTMLDivElement>) => {
    if (event.target === event.currentTarget) {
      onClose();
    }
  };

  return (
    <Dialog
      open={open}
      onClose={onClose}
      maxWidth="md"
      fullWidth
      fullScreen={false}
      TransitionComponent={Fade}
      TransitionProps={{ timeout: 300 }}
      BackdropComponent={Backdrop}
      BackdropProps={{
        timeout: 300,
        onClick: handleBackdropClick,
      }}
      disableScrollLock={false}
      PaperProps={{
        sx: {
          borderRadius: 2,
          maxHeight: '90vh',
          m: { xs: 2, sm: 3 },
        },
      }}
    >
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */}
      <DialogTitle
        sx={{
          display: 'flex',
          alignItems: 'center',
          justifyContent: 'space-between',
          pb: 2,
          borderBottom: 1,
          borderColor: 'divider',
        }}
      >
        <Typography variant="h5" component="span" fontWeight={700}>
          –î—é—Ä–∞—Ü–∏—è –æ–±–ª–∏–≥–∞—Ü–∏–π
        </Typography>
        <IconButton
          onClick={onClose}
          size="small"
          sx={{
            ml: 2,
            '&:hover': {
              bgcolor: 'action.hover',
            },
          }}
          aria-label="–ó–∞–∫—Ä—ã—Ç—å"
        >
          <CloseIcon />
        </IconButton>
      </DialogTitle>

      {/* –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */}
      <DialogContent
        sx={{
          pt: 3,
          pb: 2,
          '&::-webkit-scrollbar': {
            width: '8px',
          },
          '&::-webkit-scrollbar-track': {
            bgcolor: 'action.hover',
          },
          '&::-webkit-scrollbar-thumb': {
            bgcolor: 'action.disabled',
            borderRadius: '4px',
            '&:hover': {
              bgcolor: 'text.secondary',
            },
          },
        }}
      >
        <Box>
          <ReactMarkdown
            remarkPlugins={[remarkGfm]}
            components={{
              p: ({ children }) => (
                <Typography variant="body1" component="p" sx={{ mb: 2, lineHeight: 1.7 }}>
                  {children}
                </Typography>
              ),
              strong: ({ children }) => (
                <strong style={{ fontWeight: 700, color: 'inherit' }}>{children}</strong>
              ),
              em: ({ children }) => <em>{children}</em>,
              ul: ({ children }) => (
                <Box component="ul" sx={{ pl: 3, mb: 2, mt: 1 }}>
                  {children}
                </Box>
              ),
              ol: ({ children }) => (
                <Box component="ol" sx={{ pl: 3, mb: 2, mt: 1 }}>
                  {children}
                </Box>
              ),
              li: ({ children }) => (
                <Typography variant="body1" component="li" sx={{ mb: 1, lineHeight: 1.7 }}>
                  {children}
                </Typography>
              ),
              h1: ({ children }) => (
                <Typography variant="h4" component="h1" sx={{ mb: 2, mt: 3, fontWeight: 700 }}>
                  {children}
                </Typography>
              ),
              h2: ({ children }) => (
                <Typography variant="h5" component="h2" sx={{ mb: 1.5, mt: 2.5, fontWeight: 600 }}>
                  {children}
                </Typography>
              ),
              h3: ({ children }) => (
                <Typography variant="h6" component="h3" sx={{ mb: 1, mt: 2, fontWeight: 600 }}>
                  {children}
                </Typography>
              ),
              table: ({ children }) => (
                <Box
                  component="table"
                  sx={{
                    width: '100%',
                    borderCollapse: 'collapse',
                    mb: 3,
                    mt: 2,
                    border: 1,
                    borderColor: 'divider',
                    borderRadius: 1,
                    overflow: 'hidden',
                  }}
                >
                  {children}
                </Box>
              ),
              thead: ({ children }) => (
                <Box component="thead" sx={{ bgcolor: 'action.hover' }}>
                  {children}
                </Box>
              ),
              tbody: ({ children }) => (
                <Box component="tbody">{children}</Box>
              ),
              tr: ({ children }) => (
                <Box
                  component="tr"
                  sx={{
                    borderBottom: 1,
                    borderColor: 'divider',
                    '&:last-child': {
                      borderBottom: 0,
                    },
                  }}
                >
                  {children}
                </Box>
              ),
              th: ({ children }) => (
                <Box
                  component="th"
                  sx={{
                    p: 1.5,
                    textAlign: 'left',
                    fontWeight: 600,
                    borderRight: 1,
                    borderColor: 'divider',
                    '&:last-child': {
                      borderRight: 0,
                    },
                  }}
                >
                  {children}
                </Box>
              ),
              td: ({ children }) => (
                <Box
                  component="td"
                  sx={{
                    p: 1.5,
                    borderRight: 1,
                    borderColor: 'divider',
                    '&:last-child': {
                      borderRight: 0,
                    },
                  }}
                >
                  {children}
                </Box>
              ),
              code: ({ children }) => (
                <Box
                  component="code"
                  sx={{
                    bgcolor: 'rgba(0, 0, 0, 0.08)',
                    px: 0.5,
                    py: 0.25,
                    borderRadius: 0.5,
                    fontFamily: 'monospace',
                    fontSize: '0.9em',
                  }}
                >
                  {children}
                </Box>
              ),
            }}
          >
            {DURATION_CONTENT}
          </ReactMarkdown>
        </Box>
      </DialogContent>

      {/* –î–µ–π—Å—Ç–≤–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ */}
      <DialogActions
        sx={{
          px: 3,
          pb: 2,
          pt: 2,
          borderTop: 1,
          borderColor: 'divider',
        }}
      >
        <Button
          onClick={onClose}
          variant="contained"
          color="primary"
          size="large"
          sx={{ minWidth: 120 }}
        >
          –ü–æ–Ω—è—Ç–Ω–æ
        </Button>
      </DialogActions>
    </Dialog>
  );
};
